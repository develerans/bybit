<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ByBit Trading Bot Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@3.0.4/build/global/luxon.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.3.1/dist/chartjs-adapter-luxon.min.js"></script>
    <style>
        :root {
            /* –¢–µ–º–Ω–∞—è —Ç–µ–º–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) */
            --bg-primary: #1e1e2e;
            --bg-secondary: #2d2d44;
            --bg-card: #252536;
            --bg-hover: #3a3a5a;
            --text-primary: #ffffff;
            --text-secondary: #b0b0cc;
            --text-muted: #8888aa;
            --border-color: #3a3a5a;
            --accent-primary: #6366f1;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --accent-info: #06b6d4;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }

        [data-theme="light"] {
            --bg-primary: #f8fafc;
            --bg-secondary: #f1f5f9;
            --bg-card: #ffffff;
            --bg-hover: #e2e8f0;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border-color: #cbd5e1;
            --accent-primary: #3b82f6;
            --accent-success: #059669;
            --accent-warning: #d97706;
            --accent-danger: #dc2626;
            --accent-info: #0891b2;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 15px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--accent-primary), var(--accent-info));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-primary);
            padding: 8px;
            border-radius: 50%;
            background: var(--bg-secondary);
        }

        .theme-toggle:hover {
            background: var(--bg-hover);
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            background: var(--bg-card);
            border-radius: 10px;
            padding: 5px;
            border: 1px solid var(--border-color);
            flex-wrap: wrap;
            box-shadow: var(--shadow);
        }

        .tab-button {
            flex: 1;
            padding: 12px 20px;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            min-width: 120px;
            font-weight: 600;
        }

        .tab-button:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }

        .tab-button.active {
            background: var(--accent-primary);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, border-color 0.3s ease;
        }

        .card:hover {
            transform: translateY(-2px);
            border-color: var(--accent-primary);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-item {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: background 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .status-item:hover {
            background: var(--bg-hover);
        }

        .status-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .status-value {
            font-size: 1.4rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .connected { color: var(--accent-success); }
        .disconnected { color: var(--accent-danger); }
        .warning { color: var(--accent-warning); }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary { background: var(--accent-primary); }
        .btn-success { background: var(--accent-success); }
        .btn-danger { background: var(--accent-danger); }
        .btn-warning { background: var(--accent-warning); }
        .btn-info { background: var(--accent-info); }

        .btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23" + (document.documentElement.getAttribute('data-theme') === 'light' ? '1e293b' : 'ffffff') + "'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
        }

        .log-container {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            max-height: 400px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            border: 1px solid var(--border-color);
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 10px 12px;
            border-left: 3px solid var(--accent-info);
            background: var(--bg-card);
            border-radius: 0 5px 5px 0;
            animation: slideIn 0.3s ease;
        }

        .log-entry.error { border-left-color: var(--accent-danger); }
        .log-entry.success { border-left-color: var(--accent-success); }
        .log-entry.warning { border-left-color: var(--accent-warning); }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .strategy-list {
            margin-top: 20px;
        }

        .strategy-item {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid var(--border-color);
        }

        .strategy-info {
            flex: 1;
        }

        .strategy-name {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .strategy-details {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .spinner {
            border: 2px solid var(--text-muted);
            border-top: 2px solid var(--accent-primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ */
        .chart-container {
            position: relative;
            height: 400px;
            width: 100%;
            margin: 20px 0;
            background: var(--bg-card);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-color);
        }

        .chart-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .timeframe-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-primary);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeframe-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }

        .timeframe-btn:hover {
            background: var(--bg-hover);
        }

        .market-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .market-card {
            background: var(--bg-secondary);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .market-card:hover {
            transform: translateY(-2px);
            border-color: var(--accent-primary);
        }

        .market-symbol {
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .market-price {
            font-size: 1.3rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .market-change {
            font-size: 0.9rem;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
        }

        .positive { background: var(--accent-success); color: white; }
        .negative { background: var(--accent-danger); color: white; }

        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-button {
                min-width: auto;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }

            .chart-container {
                height: 300px;
            }

            .market-overview {
                grid-template-columns: 1fr;
            }

            .performance-stats {
                grid-template-columns: 1fr;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ByBit Trading Bot Pro</h1>
            <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã–º –±–æ—Ç–æ–º</p>
            <button class="theme-toggle" id="themeToggle">üåô</button>
        </div>
        
        <div class="tabs">
            <button class="tab-button active" onclick="openTab('dashboard')">üìä –î–∞—à–±–æ—Ä–¥</button>
            <button class="tab-button" onclick="openTab('strategies')">üéØ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏</button>
            <button class="tab-button" onclick="openTab('trading')">üíπ –¢–æ—Ä–≥–æ–≤–ª—è</button>
            <button class="tab-button" onclick="openTab('charts')">üìà –ì—Ä–∞—Ñ–∏–∫–∏</button>
            <button class="tab-button" onclick="openTab('analysis')">üîç –ê–Ω–∞–ª–∏–∑</button>
            <button class="tab-button" onclick="openTab('settings')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
        
        <!-- –î–∞—à–±–æ—Ä–¥ -->
        <div id="dashboard" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
                    <div class="card-actions">
                        <button class="btn btn-primary" onclick="checkHealth()">
                            <span class="spinner" id="healthSpinner" style="display: none;"></span>
                            üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
                <div class="status-grid">
                    <div class="status-item">
                        <div class="status-label">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
                        <div class="status-value" id="appStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">ByBit API</div>
                        <div class="status-value" id="bybitStatus">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</div>
                        <div class="status-value" id="strategiesCount">0</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">–ë–∞–ª–∞–Ω—Å</div>
                        <div class="status-value" id="balanceValue">-</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–û–±–∑–æ—Ä —Ä—ã–Ω–∫–∞</h2>
                </div>
                <div class="market-overview" id="marketOverview">
                    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</h2>
                </div>
                <div class="performance-stats">
                    <div class="stat-card">
                        <div class="stat-label">–û–±—â–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                        <div class="stat-value" id="totalProfit">0 USDT</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–í–∏–Ω—Ä–µ–π—Ç</div>
                        <div class="stat-value" id="winRate">0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–¥–µ–ª–∫–∏</div>
                        <div class="stat-value" id="activeTrades">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–ú–∞–∫—Å. –ø—Ä–æ—Å–∞–¥–∫–∞</div>
                        <div class="stat-value" id="maxDrawdown">0%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ -->
        <div id="strategies" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</h2>
                </div>
                <form id="strategyForm">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</label>
                        <input type="text" class="form-control" id="strategyName" placeholder="–ú–æ—è —Ç–æ—Ä–≥–æ–≤–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞</label>
                        <select class="form-control form-select" id="strategySymbol" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä—É</option>
                            <option value="BTCUSDT">BTCUSDT</option>
                            <option value="ETHUSDT">ETHUSDT</option>
                            <option value="BNBUSDT">BNBUSDT</option>
                            <option value="SOLUSDT">SOLUSDT</option>
                            <option value="XRPUSDT">XRPUSDT</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–¢–∏–ø —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</label>
                        <select class="form-control form-select" id="strategyType" required>
                            <option value="grid">Grid Trading</option>
                            <option value="mean_reversion">Mean Reversion</option>
                            <option value="momentum">Momentum</option>
                            <option value="arbitrage">Arbitrage</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤–ª–∏ (USDT)</label>
                        <input type="number" class="form-control" id="strategyVolume" min="10" max="10000" value="100" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">–ö—Ä–µ–¥–∏—Ç–Ω–æ–µ –ø–ª–µ—á–æ</label>
                        <input type="number" class="form-control" id="strategyLeverage" min="1" max="100" value="10">
                    </div>
                    
                    <button type="submit" class="btn btn-success" style="width: 100%;">
                        üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
                    </button>
                </form>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏</h2>
                    <div class="card-actions">
                        <button class="btn btn-info" onclick="loadActiveStrategies()">
                            üîÑ –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
                <div id="activeStrategies">
                    <div class="strategy-item">
                        <div class="strategy-info">
                            <div class="strategy-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –¢–æ—Ä–≥–æ–≤–ª—è -->
        <div id="trading" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
                </div>
                <div class="form-group">
                    <select class="form-control form-select" id="marketSymbol" onchange="getMarketData(this.value)">
                        <option value="BTCUSDT">BTCUSDT</option>
                        <option value="ETHUSDT">ETHUSDT</option>
                        <option value="BNBUSDT">BNBUSDT</option>
                    </select>
                </div>
                <div id="marketData">
                    <div class="status-item">
                        <div class="status-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–∏–º–≤–æ–ª</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ì—Ä–∞—Ñ–∏–∫–∏ -->
        <div id="charts" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–ì—Ä–∞—Ñ–∏–∫ —Ü–µ–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</h2>
                    <div class="card-actions">
                        <div class="chart-controls">
                            <button class="timeframe-btn active" onclick="changeTimeframe('1h')">1H</button>
                            <button class="timeframe-btn" onclick="changeTimeframe('4h')">4H</button>
                            <button class="timeframe-btn" onclick="changeTimeframe('1d')">1D</button>
                            <button class="timeframe-btn" onclick="changeTimeframe('1w')">1W</button>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–π</h2>
                </div>
                <div class="chart-container">
                    <canvas id="performanceChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- –ê–Ω–∞–ª–∏–∑ -->
        <div id="analysis" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑</h2>
                    <div class="card-actions">
                        <button class="btn btn-info" onclick="getTechnicalAnalysis('BTCUSDT')">
                            üìà –ê–Ω–∞–ª–∏–∑ BTCUSDT
                        </button>
                        <button class="btn btn-info" onclick="getTechnicalAnalysis('ETHUSDT')">
                            üìà –ê–Ω–∞–ª–∏–∑ ETHUSDT
                        </button>
                    </div>
                </div>
                <div id="analysisResults" class="log-container" style="margin-top: 20px;">
                    <div class="log-entry">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>
            </div>
        </div>
        
        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="settings" class="tab-content">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                    <div class="card-actions">
                        <button class="btn btn-primary" onclick="loadSettings()">
                            ‚öôÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                        </button>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">–¢–µ–º–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞</label>
                    <select class="form-control form-select" id="themeSelect" onchange="changeTheme(this.value)">
                        <option value="dark">–¢–µ–º–Ω–∞—è</option>
                        <option value="light">–°–≤–µ—Ç–ª–∞—è</option>
                        <option value="auto">–ê–≤—Ç–æ (—Å–∏—Å—Ç–µ–º–Ω–∞—è)</option>
                    </select>
                </div>
                <div id="settingsContent" class="log-container" style="margin-top: 20px; background: var(--bg-secondary);">
                    <div class="log-entry">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∑—è—Ç—Å—è –∑–¥–µ—Å—å...</div>
                </div>
            </div>
        </div>
        
        <!-- –õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">–õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                <div class="card-actions">
                    <button class="btn btn-primary" onclick="toggleAutoRefresh()" id="autoRefreshBtn">
                        üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –í–ö–õ
                    </button>
                    <button class="btn btn-warning" onclick="clearLogs()">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏
                    </button>
                </div>
            </div>
            <div class="log-container" id="logContainer">
                <div class="log-entry">–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ ByBit Trading Bot Pro!</div>
            </div>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let autoRefreshInterval = null;
        let isAutoRefresh = true;
        let priceChart = null;
        let performanceChart = null;
        let currentTimeframe = '1h';
        let priceData = [];
        let performanceData = [];
        let websocket = null;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
        function initTheme() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            let theme = savedTheme;
            if (savedTheme === 'auto') {
                theme = systemPrefersDark ? 'dark' : 'light';
            }
            
            document.documentElement.setAttribute('data-theme', theme);
            document.getElementById('themeSelect').value = savedTheme;
            updateThemeToggle(theme);
        }

        function changeTheme(theme) {
            localStorage.setItem('theme', theme);
            initTheme();
            addLog(`–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞: ${theme}`, 'success');
        }

        function updateThemeToggle(theme) {
            const toggle = document.getElementById('themeToggle');
            toggle.textContent = theme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∞–º–∏
        function openTab(tabName) {
            console.log('Opening tab:', tabName);
            
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => {
                button.classList.remove('active');
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
            const activeTab = document.getElementById(tabName);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É
            event.currentTarget.classList.add('active');
            
            // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
            if (tabName === 'strategies') {
                loadActiveStrategies();
            } else if (tabName === 'trading') {
                getMarketData('BTCUSDT');
            } else if (tabName === 'charts') {
                initCharts();
            }
            
            addLog(`–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É: ${tabName}`, 'info');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
        function initCharts() {
            initPriceChart();
            initPerformanceChart();
            startPriceUpdates();
        }

        function initPriceChart() {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            if (priceChart) {
                priceChart.destroy();
            }

            priceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: '–¶–µ–Ω–∞ BTCUSDT',
                        data: priceData,
                        borderColor: getComputedStyle(document.documentElement).getPropertyValue('--accent-primary'),
                        backgroundColor: 'rgba(99, 102, 241, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'minute'
                            },
                            grid: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--border-color')
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary')
                            }
                        },
                        y: {
                            grid: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--border-color')
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary')
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-primary')
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: getComputedStyle(document.documentElement).getPropertyValue('--bg-card'),
                            titleColor: getComputedStyle(document.documentElement).getPropertyValue('--text-primary'),
                            bodyColor: getComputedStyle(document.documentElement).getPropertyValue('--text-primary'),
                            borderColor: getComputedStyle(document.documentElement).getPropertyValue('--border-color'),
                            borderWidth: 1
                        }
                    }
                }
            });

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
            generateDemoPriceData();
        }

        function initPerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            if (performanceChart) {
                performanceChart.destroy();
            }

            performanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Grid BTC', 'Mean ETH', 'Momentum SOL', 'Arbitrage BNB'],
                    datasets: [{
                        label: '–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (%)',
                        data: [12.5, 8.3, -2.1, 15.7],
                        backgroundColor: [
                            getComputedStyle(document.documentElement).getPropertyValue('--accent-success'),
                            getComputedStyle(document.documentElement).getPropertyValue('--accent-primary'),
                            getComputedStyle(document.documentElement).getPropertyValue('--accent-danger'),
                            getComputedStyle(document.documentElement).getPropertyValue('--accent-warning')
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            grid: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--border-color')
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary')
                            }
                        },
                        y: {
                            grid: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--border-color')
                            },
                            ticks: {
                                color: getComputedStyle(document.documentElement).getPropertyValue('--text-secondary')
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
        }

        function generateDemoPriceData() {
            const now = Date.now();
            priceData = [];
            
            for (let i = 100; i >= 0; i--) {
                const time = now - (i * 60000); // 1 –º–∏–Ω—É—Ç–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª
                const basePrice = 45000;
                const noise = (Math.random() - 0.5) * 1000;
                const trend = i * 10;
                const price = basePrice + noise + trend;
                
                priceData.push({
                    x: time,
                    y: price
                });
            }
            
            if (priceChart) {
                priceChart.data.datasets[0].data = priceData;
                priceChart.update('none');
            }
        }

        function startPriceUpdates() {
            // –ò–º–∏—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Ü–µ–Ω—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            setInterval(() => {
                if (priceData.length > 0) {
                    const lastPoint = priceData[priceData.length - 1];
                    const newTime = lastPoint.x + 60000;
                    const change = (Math.random() - 0.5) * 200;
                    const newPrice = Math.max(44000, lastPoint.y + change);
                    
                    priceData.push({
                        x: newTime,
                        y: newPrice
                    });
                    
                    // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫
                    if (priceData.length > 200) {
                        priceData.shift();
                    }
                    
                    if (priceChart) {
                        priceChart.data.datasets[0].data = priceData;
                        priceChart.update('none');
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±–∑–æ—Ä —Ä—ã–Ω–∫–∞
                    updateMarketOverview();
                }
            }, 5000);
        }

        function changeTimeframe(timeframe) {
            currentTimeframe = timeframe;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.timeframe-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            addLog(`–¢–∞–π–º—Ñ—Ä–µ–π–º –∏–∑–º–µ–Ω–µ–Ω: ${timeframe}`, 'info');
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            generateDemoPriceData();
        }

        function updateMarketOverview() {
            const symbols = ['BTCUSDT', 'ETHUSDT', 'BNBUSDT', 'SOLUSDT', 'XRPUSDT'];
            const container = document.getElementById('marketOverview');
            
            let html = '';
            symbols.forEach(symbol => {
                const basePrice = {
                    'BTCUSDT': 45000,
                    'ETHUSDT': 2500,
                    'BNBUSDT': 300,
                    'SOLUSDT': 100,
                    'XRPUSDT': 0.5
                }[symbol];
                
                const change = (Math.random() - 0.5) * 0.1; // ¬±5%
                const price = basePrice * (1 + change);
                const changePercent = (change * 100).toFixed(2);
                const changeClass = change >= 0 ? 'positive' : 'negative';
                
                html += `
                    <div class="market-card">
                        <div class="market-symbol">${symbol}</div>
                        <div class="market-price">$${price.toFixed(2)}</div>
                        <div class="market-change ${changeClass}">${changePercent}%</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        function initWebSocket() {
            try {
                const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
                const wsUrl = `${protocol}//${window.location.host}/ws`;
                
                websocket = new WebSocket(wsUrl);
                
                websocket.onopen = function() {
                    addLog('WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω', 'success');
                };
                
                websocket.onmessage = function(event) {
                    const data = JSON.parse(event.data);
                    handleWebSocketMessage(data);
                };
                
                websocket.onclose = function() {
                    addLog('WebSocket –æ—Ç–∫–ª—é—á–µ–Ω', 'warning');
                    // –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                    setTimeout(initWebSocket, 5000);
                };
                
                websocket.onerror = function(error) {
                    addLog('WebSocket –æ—à–∏–±–∫–∞: ' + error, 'error');
                };
                
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ WebSocket: ' + error, 'error');
            }
        }

        function handleWebSocketMessage(data) {
            if (data.type === 'price_update') {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
                updateRealTimePrices(data.data);
            } else if (data.type === 'strategy_update') {
                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
                loadActiveStrategies();
            }
        }

        function updateRealTimePrices(prices) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±–∑–æ—Ä —Ä—ã–Ω–∫–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
            const container = document.getElementById('marketOverview');
            let html = '';
            
            Object.entries(prices).forEach(([symbol, price]) => {
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–∞—Å—á–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω—ã
                const changePercent = (Math.random() - 0.5) * 0.1;
                const changeClass = changePercent >= 0 ? 'positive' : 'negative';
                
                html += `
                    <div class="market-card">
                        <div class="market-symbol">${symbol}</div>
                        <div class="market-price">$${parseFloat(price).toFixed(2)}</div>
                        <div class="market-change ${changeClass}">${(changePercent * 100).toFixed(2)}%</div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ API (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏)
        async function checkHealth() {
            showSpinner('healthSpinner');
            try {
                addLog('–ó–∞–ø—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ —Å–∏—Å—Ç–µ–º—ã...', 'info');
                const response = await fetch('/api/health');
                const data = await response.json();
                
                document.getElementById('appStatus').textContent = data.status === 'running' ? '–†–∞–±–æ—Ç–∞–µ—Ç' : '–û—à–∏–±–∫–∞';
                document.getElementById('appStatus').className = 'status-value ' + 
                    (data.status === 'running' ? 'connected' : 'disconnected');
                
                document.getElementById('bybitStatus').textContent = 
                    data.bybit_connected ? '–ü–æ–¥–∫–ª—é—á–µ–Ω–æ' : '–û—Ç–∫–ª—é—á–µ–Ω–æ';
                document.getElementById('bybitStatus').className = 'status-value ' + 
                    (data.bybit_connected ? 'connected' : 'disconnected');
                    
                addLog(`–°—Ç–∞—Ç—É—Å: ${data.status}, ByBit: ${data.bybit_connected}`, 'success');
                
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç–∞—Ç—É—Å–∞: ' + error.message, 'error');
                document.getElementById('appStatus').textContent = '–û—à–∏–±–∫–∞';
                document.getElementById('appStatus').className = 'status-value disconnected';
            } finally {
                hideSpinner('healthSpinner');
            }
        }

        async function getAccountInfo() {
            try {
                addLog('–ó–∞–ø—Ä–æ—Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ...', 'info');
                const response = await fetch('/api/account');
                const data = await response.json();
                
                if (data.balance && data.balance.result && data.balance.result.list) {
                    const balance = data.balance.result.list[0];
                    const totalEquity = balance.totalEquity || 'N/A';
                    document.getElementById('balanceValue').textContent = totalEquity + ' USDT';
                    addLog(`–ë–∞–ª–∞–Ω—Å –ø–æ–ª—É—á–µ–Ω: ${totalEquity} USDT`, 'success');
                } else {
                    document.getElementById('balanceValue').textContent = '–û—à–∏–±–∫–∞';
                    addLog('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å', 'error');
                }
                
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ: ' + error.message, 'error');
                document.getElementById('balanceValue').textContent = '–û—à–∏–±–∫–∞';
            }
        }

        async function getStrategies() {
            try {
                addLog('–ó–∞–ø—Ä–æ—Å —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π...', 'info');
                const response = await fetch('/api/strategies');
                const data = await response.json();
                
                document.getElementById('strategiesCount').textContent = data.strategies.length;
                addLog(`–ü–æ–ª—É—á–µ–Ω–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π: ${data.strategies.length}`, 'success');
                
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π: ' + error.message, 'error');
            }
        }

        async function loadActiveStrategies() {
            try {
                const response = await fetch('/api/strategies');
                const data = await response.json();
                
                const container = document.getElementById('activeStrategies');
                if (data.strategies && data.strategies.length > 0) {
                    container.innerHTML = data.strategies.map(strategy => `
                        <div class="strategy-item">
                            <div class="strategy-info">
                                <div class="strategy-name">${strategy.config.name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</div>
                                <div class="strategy-details">
                                    ${strategy.config.symbol} ‚Ä¢ ${strategy.config.type} ‚Ä¢ ${strategy.config.volume} USDT
                                </div>
                            </div>
                            <button class="btn btn-danger" onclick="stopStrategy('${strategy.id}')">
                                üõë –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                            </button>
                        </div>
                    `).join('');
                } else {
                    container.innerHTML = '<div class="strategy-item"><div class="strategy-info"><div class="strategy-name">–ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</div></div></div>';
                }
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π: ' + error.message, 'error');
            }
        }

        async function stopStrategy(strategyId) {
            try {
                addLog(`–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ ${strategyId}...`, 'warning');
                const response = await fetch(`/api/strategies/stop/${strategyId}`, {
                    method: 'POST'
                });
                
                const result = await response.json();
                if (result.status === 'success') {
                    addLog(`–°—Ç—Ä–∞—Ç–µ–≥–∏—è ${strategyId} –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞`, 'success');
                    loadActiveStrategies();
                    getStrategies();
                }
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: ' + error.message, 'error');
            }
        }

        async function getMarketData(symbol) {
            try {
                addLog(`–ó–∞–ø—Ä–æ—Å —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è ${symbol}...`, 'info');
                const response = await fetch(`/api/market/${symbol}`);
                const data = await response.json();
                
                const container = document.getElementById('marketData');
                if (data.ticker && data.ticker.result && data.ticker.result.list) {
                    const ticker = data.ticker.result.list[0];
                    container.innerHTML = `
                        <div class="status-grid">
                            <div class="status-item">
                                <div class="status-label">–¶–µ–Ω–∞</div>
                                <div class="status-value">${ticker.lastPrice || 'N/A'}</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">–ò–∑–º–µ–Ω–µ–Ω–∏–µ 24—á</div>
                                <div class="status-value">${ticker.price24hPcnt ? (parseFloat(ticker.price24hPcnt) * 100).toFixed(2) + '%' : 'N/A'}</div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">–û–±—ä–µ–º 24—á</div>
                                <div class="status-value">${ticker.volume24h ? parseFloat(ticker.volume24h).toFixed(2) : 'N/A'}</div>
                            </div>
                        </div>
                    `;
                    addLog(`–†—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è ${symbol} –ø–æ–ª—É—á–µ–Ω—ã`, 'success');
                } else {
                    container.innerHTML = '<div class="status-item"><div class="status-label">–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</div></div>';
                    addLog('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ', 'error');
                }
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä—ã–Ω–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: ' + error.message, 'error');
            }
        }

        async function getTechnicalAnalysis(symbol) {
            try {
                addLog(`–ó–∞–ø—Ä–æ—Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è ${symbol}...`, 'info');
                const response = await fetch(`/api/analysis/${symbol}`);
                const data = await response.json();
                
                const container = document.getElementById('analysisResults');
                container.innerHTML = `
                    <div class="log-entry success">–ê–Ω–∞–ª–∏–∑ ${data.symbol}</div>
                    <div class="log-entry">RSI: ${data.rsi || 'N/A'}</div>
                    <div class="log-entry">MACD: ${data.macd || 'N/A'}</div>
                    <div class="log-entry">–¢—Ä–µ–Ω–¥: ${data.trend || 'N/A'}</div>
                    <div class="log-entry">–£—Ä–æ–≤–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏: ${data.support_levels ? data.support_levels.join(', ') : 'N/A'}</div>
                    <div class="log-entry">–£—Ä–æ–≤–Ω–∏ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è: ${data.resistance_levels ? data.resistance_levels.join(', ') : 'N/A'}</div>
                `;
                addLog(`–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –¥–ª—è ${symbol} –∑–∞–≤–µ—Ä—à–µ–Ω`, 'success');
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞: ' + error.message, 'error');
            }
        }

        async function loadSettings() {
            try {
                addLog('–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∏—Å—Ç–µ–º—ã...', 'info');
                const response = await fetch('/api/settings');
                const data = await response.json();
                
                const container = document.getElementById('settingsContent');
                container.innerHTML = `<pre style="color: var(--text-primary); white-space: pre-wrap;">${JSON.stringify(data, null, 2)}</pre>`;
                addLog('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã', 'success');
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫: ' + error.message, 'error');
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
        document.getElementById('strategyForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const strategyConfig = {
                name: document.getElementById('strategyName').value,
                symbol: document.getElementById('strategySymbol').value,
                type: document.getElementById('strategyType').value,
                volume: parseFloat(document.getElementById('strategyVolume').value),
                leverage: parseInt(document.getElementById('strategyLeverage').value)
            };
            
            try {
                addLog(`–ó–∞–ø—É—Å–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: ${strategyConfig.name}`, 'info');
                const response = await fetch('/api/strategies/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(strategyConfig)
                });
                
                const result = await response.json();
                if (result.status === 'success') {
                    addLog(`–°—Ç—Ä–∞—Ç–µ–≥–∏—è "${strategyConfig.name}" —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞ (ID: ${result.strategy_id})`, 'success');
                    this.reset();
                    loadActiveStrategies();
                    getStrategies();
                } else {
                    addLog('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: ' + (result.detail || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'), 'error');
                }
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏: ' + error.message, 'error');
            }
        });

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logContainer.appendChild(logEntry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        function clearLogs() {
            const logContainer = document.getElementById('logContainer');
            logContainer.innerHTML = '<div class="log-entry">–õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã</div>';
            addLog('–õ–æ–≥–∏ —Å–∏—Å—Ç–µ–º—ã –æ—á–∏—â–µ–Ω—ã', 'warning');
        }

        function showSpinner(spinnerId) {
            const spinner = document.getElementById(spinnerId);
            if (spinner) {
                spinner.style.display = 'inline-block';
            }
        }

        function hideSpinner(spinnerId) {
            const spinner = document.getElementById(spinnerId);
            if (spinner) {
                spinner.style.display = 'none';
            }
        }

        function toggleAutoRefresh() {
            const button = document.getElementById('autoRefreshBtn');
            if (isAutoRefresh) {
                clearInterval(autoRefreshInterval);
                button.innerHTML = 'üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –í–´–ö–õ';
                button.className = 'btn btn-warning';
                addLog('–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ', 'warning');
            } else {
                startAutoRefresh();
                button.innerHTML = 'üîÑ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –í–ö–õ';
                button.className = 'btn btn-primary';
                addLog('–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ', 'success');
            }
            isAutoRefresh = !isAutoRefresh;
        }

        function startAutoRefresh() {
            autoRefreshInterval = setInterval(() => {
                checkHealth();
                getStrategies();
            }, 30000); // –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        }

        // –î–µ–º–æ-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updatePerformanceStats() {
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–µ–º–æ-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            document.getElementById('totalProfit').textContent = '+1,245.50 USDT';
            document.getElementById('winRate').textContent = '67.8%';
            document.getElementById('activeTrades').textContent = '8';
            document.getElementById('maxDrawdown').textContent = '-3.2%';
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã –ø–æ –∫–Ω–æ–ø–∫–µ
        document.getElementById('themeToggle').addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            changeTheme(newTheme);
        });

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            addLog('–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'success');
            checkHealth();
            getStrategies();
            startAutoRefresh();
            updateMarketOverview();
            updatePerformanceStats();
            initWebSocket();
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –µ—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞
            if (document.getElementById('strategies').classList.contains('active')) {
                loadActiveStrategies();
            }
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        window.addEventListener('error', function(e) {
            addLog('–û—à–∏–±–∫–∞ JavaScript: ' + e.error, 'error');
        });
    </script>
</body>
</html>